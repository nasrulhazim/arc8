#!/usr/bin/env bash

if type "composer" > /dev/null; then
	echo "🏗️  Updating backend dependencies..."
	composer update --quiet --no-ansi --no-interaction >/dev/null
	if [[ `git status --porcelain` ]]; then
	  git add composer.json composer.lock
	  bin/commit dependencies "Update backend dependencies"
	else
	  echo "🎉 You have successfully update the dependencies!"
	fi
else  
	echo "☠️ You need to install composer in order to update dependencies" 
fi

if type "yarn" > /dev/null; then
	echo "🏗️  Updating frontend dependencies..."
	yarn upgrade --silent >/dev/null
	if [[ `git status --porcelain` ]]; then
	  git add yarn.lock
	  bin/commit dependencies "Update frontend dependencies"
	else
	  echo "🎉 You have successfully update the dependencies!"
	fi
else  
	echo "☠️ You need to install Yarn in order to upgrade frontend dependencies" 
fi